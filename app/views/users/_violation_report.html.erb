<% collaborations_with_violations = @user.collaborations_with_violations %>

<% if collaborations_with_violations.any? %>
  <h1 id="collaborator-h1" class="text-center">Violations</h1>

  <table class="table bg-white violations-report sortable-theme-bootstrap" data-sortable>
    <thead>
      <tr>
        <th>Name <i class="fa"></i></th>
        <th>Building <i class="fa"></i></th>
        <th class="numeric">Number of Violations <i class="fa"></i></th>
        <th class="numeric">Current Temperature (Â°F)<i class="fa"></i></th>
        <th>Manage</th>
      </tr>
    </thead>
    <tbody>
    <% collaborations_with_violations.each do |collaboration| %>
      <% user = collaboration.collaborator %>

      <tr>
        <td><%= link_to user.name, user_path(user) %></td>
        <td><%= "#{user.address}, #{user.zip_code}" %></td>
        <td class="numeric"><%= collaboration.violations_count %></td>
        <td class="numeric" data-value="<%= user.current_temp %>"><%= user.current_temp_string %></td>
        <td>
          <% if @user.admin_or_more_powerful? %>
            <%= link_to "", edit_user_path(user), :class => "fa fa-wrench" %>
          <% end %>
          <%= link_to "", user_collaboration_path(@user, collaboration), method: :delete, :class => "fa fa-times", data: { confirm: "Are you sure?", remote: true} %>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
<% end %>
